!!!
%html{lang: "en"}
  %head
    %meta{charset: 'utf-8'}/
    %meta{content: 'IE=edge', 'http-equiv' => 'X-UA-Compatible'}/
    %meta{content: 'width=device-width, initial-scale=1.0', name: 'viewport'}/
    %meta{content: 'Create epub from story on fanfiction.com', name: 'description'}/
    %title Fanfic epub generator
    / Bootstrap core CSS
    %link{href: '//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css', rel: 'stylesheet'}/
    / HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries
    /[if lt IE 9]
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  %body
    :css
      body {
        padding-top: 40px;
        padding-bottom: 40px;
        background-color: #eee;
      }

    .container

      .list-group
        .list-group-item
          %form.form{action: 'story.epub', method: 'get'}
            .input-group
              %span.input-group-addon Story url:
              %input.form-control{autofocus: true, name: 'url', placeholder: 'https://www.fanfiction.com/s/#story_id', required: true}
              %span.input-group-btn
                %button.btn.btn-primary{type: 'submit'}
                  %span.glyphicon.glyphicon-download
                  Download ePub


        .list-group-item
          %h2.list-group-item-heading
            = @feed.title

        - @feed.entries.each do |entry|
          .list-group-item
            %h4.list-group-item-heading
              %a.btn.btn-primary.pull-right{href: "/story.epub?url=#{entry.links[0]}"}
                %span.glyphicon.glyphicon-download
                Download ePub

              %a{href: entry.links[0], target: :new}
                = entry.title
              %small= entry.published
            %p.list-group-item-text
              = entry.summary
